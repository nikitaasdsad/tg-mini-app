<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–ì–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ ‚Äî –º–∏–Ω–∏-–∞–ø–ø</title>
<style>
  :root{--bg:#0f1113;--card:#121316;--muted:#bfc7cd;--accent:#2EA44F}
  body{margin:18px;font-family:Inter,Arial;background:var(--bg);color:#fff}
  .wrap{max-width:720px;margin:0 auto}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .card{background:var(--card);padding:8px;border-radius:10px;overflow:hidden}
  img{width:100%;height:160px;object-fit:cover;border-radius:6px}
  .title{font-weight:600;margin-top:8px}
  .short{color:var(--muted);font-size:13px}
  .row{display:flex;gap:8px;margin-top:8px;align-items:center}
  .btn{padding:8px 10px;border-radius:8px;border:0;cursor:pointer}
  .btn.primary{background:var(--accent);color:#06140a;font-weight:700}
  .codebox{margin-top:12px;padding:10px;border-radius:8px;background:#0b0c0d;border:1px solid rgba(255,255,255,0.03)}
  .code{font-family:monospace;font-size:20px;letter-spacing:2px}
  .hint{color:var(--muted);font-size:13px;margin-top:8px}
</style>
</head>
<body>
<div class="wrap">
  <h2>üìö –ì–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏</h2>
  <div id="grid" class="grid"></div>

  <div id="detail" style="display:none;margin-top:12px" class="card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div id="dtitle" class="title">Title</div>
        <div id="dshort" class="short">Short</div>
      </div>
      <div>
        <button id="backBtn" class="btn">üîô</button>
      </div>
    </div>

    <div style="margin-top:10px">
      <div id="dcaption" class="short"></div>
      <div class="row">
        <button id="rentBtn" class="btn primary">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
      </div>

      <div id="codeArea" class="codebox" style="display:none">
        <div>–í–∞—à –∫–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ –±–æ—Ç–∞:</div>
        <div style="display:flex;align-items:center;gap:8px;margin-top:8px">
          <div id="theCode" class="code">GS0100AB</div>
          <button id="copyBtn" class="btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        <div class="hint">–í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º ‚Äî –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏—è (–∫—Ä–æ–º–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ —à–∞–≥–æ–≤).</div>
      </div>
    </div>
  </div>
</div>

<script>
const ALL_SCENARIOS = [
  { title: "–í–∏–Ω—Ç–∞–∂–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç", short: "–ú—è–≥–∫–∏–π —Å–≤–µ—Ç, —Ç—ë–ø–ª—ã–µ —Ç–æ–Ω–∞.", caption: "–í–∏–Ω—Ç–∞–∂–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç: –º—è–≥–∫–∏–π —Å–≤–µ—Ç, —Ç—ë–ø–ª—ã–µ —Ç–æ–Ω–∞."},
  { title: "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≥–µ—Ä–æ–∏–Ω—è", short: "–Ø—Ä–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞ –∏ –ø–∏—Ä—Å–∏–Ω–≥.", caption: "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å: —è—Ä–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞, –ø–∏—Ä—Å–∏–Ω–≥."},
  { title: "–ù–µ–æ–Ω–æ–≤—ã–π –∫–∏–±–µ—Ä–ø–∞–Ω–∫", short: "–ù–µ–æ–Ω, –¥–æ–∂–¥—å.", caption: "–ö–∏–±–µ—Ä–ø–∞–Ω–∫: –Ω–µ–æ–Ω–æ–≤—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã, –≥–æ—Ä–æ–¥—Å–∫–æ–π –¥–æ–∂–¥—å."},
  { title: "–ú–æ—Ä—Å–∫–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç", short: "–í–µ—Ç–µ—Ä –≤ –≤–æ–ª–æ—Å–∞—Ö.", caption: "–ú–æ—Ä—Å–∫–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç: —Å–≤–µ–∂–∏–π –±–µ—Ä–µ–≥, –∑–∞–¥—É–º—á–∏–≤—ã–π –≤–∑–≥–ª—è–¥."}
];

// helper –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞: GS + two-digit index + 4 —Å–∏–º–≤–æ–ª–∞ base36 uppercase
function randCodeForIndex(idx){
  const pad = String(idx).padStart(2,'0');
  const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  let s = '';
  for(let i=0;i<4;i++) s += chars[Math.floor(Math.random()*chars.length)];
  return 'GS' + pad + s;
}

const grid = document.getElementById('grid');
const detail = document.getElementById('detail');
const dtitle = document.getElementById('dtitle');
const dshort = document.getElementById('dshort');
const dcaption = document.getElementById('dcaption');
const backBtn = document.getElementById('backBtn');
const rentBtn = document.getElementById('rentBtn');
const codeArea = document.getElementById('codeArea');
const theCode = document.getElementById('theCode');
const copyBtn = document.getElementById('copyBtn');

let currentIdx = 0;

function renderMain(){
  grid.innerHTML = '';
  for(let i=0;i<ALL_SCENARIOS.length;i++){
    const sc = ALL_SCENARIOS[i];
    const c = document.createElement('div'); c.className='card';
    c.style.cursor='pointer';
    c.innerHTML = `<img src="https://picsum.photos/seed/${i}/600/400" alt=""><div class="title">${sc.title}</div><div class="short">${sc.short}</div>`;
    c.addEventListener('click', ()=> openDetail(i));
    grid.appendChild(c);
  }
}

function openDetail(i){
  currentIdx = i;
  const sc = ALL_SCENARIOS[i];
  dtitle.textContent = sc.title;
  dshort.textContent = sc.short;
  dcaption.textContent = sc.caption;
  codeArea.style.display='none';
  detail.style.display='block';
  window.scrollTo({top:0,behavior:'smooth'});
}

backBtn.addEventListener('click', ()=>{ detail.style.display='none'; });

rentBtn.addEventListener('click', ()=> {
  const code = randCodeForIndex(currentIdx);
  theCode.textContent = code;
  codeArea.style.display = 'block';
  // –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∏—á–µ–≥–æ –≤ –±–æ—Ç–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∫–æ–¥ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
  // –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
  try{ navigator.clipboard.writeText(code).then(()=>{ /* ok */ }, ()=>{/* not allowed */}); }catch(e){}
});

copyBtn.addEventListener('click', async ()=>{
  const txt = theCode.textContent.trim();
  try{
    await navigator.clipboard.writeText(txt);
    copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ ‚úì';
    setTimeout(()=> copyBtn.textContent = '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å', 1500);
  }catch(e){
    alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é: ' + txt);
  }
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
renderMain();
</script>
</body>
</html>
